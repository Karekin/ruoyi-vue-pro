# n8n 数字专员监控系统环境配置
# 基于芋道 Vue Pro 项目

# =============================================================================
# n8n 基础配置
# =============================================================================
N8N_HOST=localhost
N8N_PORT=5678
N8N_PROTOCOL=http
N8N_EDITOR_BASE_URL=http://localhost:5678
N8N_WEBHOOK_URL=http://localhost:5678

# 数据库配置 (使用项目的MySQL数据库)
DB_TYPE=mysql
DB_MYSQLDB_HOST=localhost
DB_MYSQLDB_PORT=3306
DB_MYSQLDB_DATABASE=yudao_vue_pro
DB_MYSQLDB_USER=root
DB_MYSQLDB_PASSWORD=123456

# 加密密钥
N8N_ENCRYPTION_KEY=your-32-char-encryption-key-here

# 日志配置
N8N_LOG_LEVEL=info
N8N_LOG_OUTPUT=console,file
N8N_LOG_FILE_LOCATION=./logs/n8n.log

# 执行配置
EXECUTIONS_PROCESS=main
EXECUTIONS_TIMEOUT=3600
EXECUTIONS_TIMEOUT_MAX=7200
EXECUTIONS_DATA_SAVE_ON_ERROR=all
EXECUTIONS_DATA_SAVE_ON_SUCCESS=all
EXECUTIONS_DATA_SAVE_MANUAL_EXECUTIONS=true

# 性能配置
N8N_PAYLOAD_SIZE_MAX=16
N8N_METRICS=true
N8N_METRICS_PREFIX=n8n_digital_agent_

# 安全配置
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=your-admin-password
N8N_JWT_AUTH_ACTIVE=false

# Webhook 配置
N8N_WEBHOOK_TUNNEL_URL=http://localhost:5678
N8N_SKIP_WEBHOOK_DEREGISTRATION_SHUTDOWN=true

# =============================================================================
# 芋道项目集成配置
# =============================================================================
SYSTEM_BASE_URL=http://localhost:8080
ADMIN_TOKEN=your-admin-jwt-token-here
TENANT_ID=1

# 数据库连接配置
YUDAO_DB_HOST=localhost
YUDAO_DB_PORT=3306
YUDAO_DB_NAME=yudao_vue_pro
YUDAO_DB_USER=root
YUDAO_DB_PASSWORD=123456

# =============================================================================
# 邮件配置
# =============================================================================
MAIL_HOST=smtp.163.com
MAIL_PORT=587
MAIL_SECURE=false
MAIL_AUTH_USER=your-email@163.com
MAIL_AUTH_PASSWORD=your-email-password
MAIL_FROM_ADDRESS=your-email@163.com
MAIL_FROM_NAME=数字专员监控系统

# 收件人配置
REPORT_EMAIL_RECIPIENTS=admin@company.com,manager@company.com
ALERT_EMAIL_RECIPIENTS=admin@company.com,ops@company.com

# =============================================================================
# 第三方集成配置
# =============================================================================

# 钉钉配置
DINGTALK_WEBHOOK_URL=https://oapi.dingtalk.com/robot/send?access_token=your-token
DINGTALK_SECRET=your-dingtalk-secret

# 企业微信配置
WECHAT_WEBHOOK_URL=https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=your-key
WECHAT_BOT_KEY=your-wechat-bot-key

# =============================================================================
# 数字专员配置
# =============================================================================

# BPM专员配置
BPM_AGENT_ENABLED=true
BPM_AGENT_SCHEDULE=0 0 */2 * * ?
BPM_AGENT_DAILY_TARGET=10
BPM_AGENT_APPROVAL_RATE=0.8

# CRM专员配置
CRM_AGENT_ENABLED=true
CRM_AGENT_SCHEDULE=0 0 9,14,17 * * ?
CRM_AGENT_DAILY_CUSTOMERS=5
CRM_AGENT_FOLLOW_UP_RATE=0.7

# ERP专员配置
ERP_AGENT_ENABLED=true
ERP_AGENT_SCHEDULE=0 30 10,15 * * ?
ERP_AGENT_DAILY_PURCHASE_ORDERS=3
ERP_AGENT_DAILY_SALE_ORDERS=8

# 系统监控专员配置
SYSTEM_AGENT_ENABLED=true
SYSTEM_AGENT_SCHEDULE=0 */10 * * * ?
SYSTEM_AGENT_HEALTH_CHECK_INTERVAL=10
SYSTEM_AGENT_PERFORMANCE_THRESHOLD=5000

# =============================================================================
# 告警配置
# =============================================================================
ALERT_ENABLED=true
ALERT_FAILURE_RATE_THRESHOLD=0.1
ALERT_RESPONSE_TIME_THRESHOLD=5000
ALERT_CONSECUTIVE_FAILURES=3
ALERT_COOLDOWN_MINUTES=30

# 告警级别配置
ALERT_LEVEL_LOW_THRESHOLD=0.05
ALERT_LEVEL_MEDIUM_THRESHOLD=0.1
ALERT_LEVEL_HIGH_THRESHOLD=0.2
ALERT_LEVEL_CRITICAL_THRESHOLD=0.3

# =============================================================================
# 报告配置
# =============================================================================
REPORT_ENABLED=true
REPORT_SCHEDULE=0 0 8 * * ?
REPORT_RETENTION_DAYS=30

# 日报配置
DAILY_REPORT_ENABLED=true
DAILY_REPORT_TIME=08:00
DAILY_REPORT_TIMEZONE=Asia/Shanghai

# 周报配置
WEEKLY_REPORT_ENABLED=true
WEEKLY_REPORT_DAY=MON
WEEKLY_REPORT_TIME=09:00

# =============================================================================
# 数据清理配置
# =============================================================================
CLEANUP_ENABLED=true
CLEANUP_SCHEDULE=0 0 2 * * ?
CLEANUP_ACTIVITY_RETENTION_DAYS=90
CLEANUP_STATISTICS_RETENTION_DAYS=365
CLEANUP_ALERT_RETENTION_DAYS=180

# =============================================================================
# 监控配置
# =============================================================================
MONITORING_ENABLED=true
MONITORING_INTERVAL=60
MONITORING_HEALTH_CHECK_TIMEOUT=30
MONITORING_PERFORMANCE_SAMPLES=10

# =============================================================================
# 开发和调试配置
# =============================================================================
NODE_ENV=production
DEBUG_MODE=false
VERBOSE_LOGGING=false
MOCK_DATA_ENABLED=false
TEST_MODE=false

# 开发环境特定配置
# NODE_ENV=development
# DEBUG_MODE=true
# VERBOSE_LOGGING=true
# MOCK_DATA_ENABLED=true
# TEST_MODE=true 