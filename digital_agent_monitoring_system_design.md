# æ•°å­—ä¸“å‘˜è¿è¥ç›‘æ§ç³»ç»Ÿè®¾è®¡æ–‡æ¡£

## 1. ç³»ç»Ÿæ¦‚è¿°

åŸºäºèŠ‹é“é¡¹ç›®çš„å¤šæ¨¡å—æ¶æ„ï¼Œè®¾è®¡å®ç°ä¸€ä¸ªè‡ªåŠ¨åŒ–çš„æ•°å­—ä¸“å‘˜è¿è¥ç›‘æ§ç³»ç»Ÿã€‚é€šè¿‡n8nå·¥ä½œæµå¼•æ“ï¼Œæ¨¡æ‹Ÿå„ä¸ªä¸šåŠ¡æ¨¡å—çš„æ•°å­—ä¸“å‘˜ï¼Œè‡ªåŠ¨æ‰§è¡Œè¿è¥æ´»åŠ¨å¹¶è®°å½•ç›‘æ§æ•°æ®ã€‚

## 2. æ•°å­—ä¸“å‘˜è§’è‰²å®šä¹‰

### 2.1 BPM å·¥ä½œæµä¸“å‘˜ (BPM Digital Agent)
**èŒè´£ï¼š** 
- ç›‘æ§å·¥ä½œæµå®ä¾‹çš„åˆ›å»ºå’Œæ‰§è¡Œ
- è·Ÿè¸ªä»»åŠ¡çŠ¶æ€å˜åŒ–
- æ¨¡æ‹Ÿæµç¨‹å®¡æ‰¹æ“ä½œ
- ç›‘æ§æµç¨‹è¶…æ—¶å’Œå¼‚å¸¸

**æ¨¡æ‹Ÿæ´»åŠ¨ï¼š**
- æ¯æ—¥åˆ›å»º 5-10 ä¸ªæµ‹è¯•å·¥ä½œæµå®ä¾‹
- è‡ªåŠ¨å®¡æ‰¹å¾…åŠä»»åŠ¡
- æ¨¡æ‹Ÿæµç¨‹é©³å›å’Œé‡æ–°æäº¤
- ç›‘æ§æµç¨‹æ€§èƒ½æŒ‡æ ‡

### 2.2 CRM å®¢æˆ·å…³ç³»ä¸“å‘˜ (CRM Digital Agent)
**èŒè´£ï¼š**
- ç®¡ç†å®¢æˆ·ç”Ÿå‘½å‘¨æœŸ
- è·Ÿè¿›é”€å”®æœºä¼š
- å¤„ç†å®¢æˆ·å’¨è¯¢
- ç»´æŠ¤å®¢æˆ·å…³ç³»

**æ¨¡æ‹Ÿæ´»åŠ¨ï¼š**
- æ¯æ—¥åˆ›å»º 3-5 ä¸ªæ–°å®¢æˆ·
- æ›´æ–°å®¢æˆ·è·Ÿè¿›è®°å½•
- åˆ›å»ºé”€å”®æœºä¼š
- æ¨¡æ‹Ÿå®¢æˆ·è½¬åŒ–æµç¨‹
- å¤„ç†å®¢æˆ·æŠ•è¯‰å’Œåé¦ˆ

### 2.3 ERP è¿è¥ä¸“å‘˜ (ERP Digital Agent)
**èŒè´£ï¼š**
- å¤„ç†é‡‡è´­å’Œé”€å”®è®¢å•
- ç®¡ç†åº“å­˜å’Œäº§å“ä¿¡æ¯
- ç›‘æ§è´¢åŠ¡æµæ°´
- ä¼˜åŒ–ä¾›åº”é“¾

**æ¨¡æ‹Ÿæ´»åŠ¨ï¼š**
- æ¯æ—¥åˆ›å»º 2-3 ä¸ªé‡‡è´­è®¢å•
- å¤„ç† 5-8 ä¸ªé”€å”®è®¢å•
- æ›´æ–°åº“å­˜ä¿¡æ¯
- ç”Ÿæˆè´¢åŠ¡æŠ¥è¡¨
- ç›‘æ§åº“å­˜é¢„è­¦

### 2.4 ç³»ç»Ÿç›‘æ§ä¸“å‘˜ (System Monitor Agent)
**èŒè´£ï¼š**
- ç›‘æ§ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡
- åˆ†æç”¨æˆ·è¡Œä¸ºæ•°æ®
- è·Ÿè¸ªç³»ç»Ÿå¼‚å¸¸
- ç”Ÿæˆè¿è¥æŠ¥å‘Š

**æ¨¡æ‹Ÿæ´»åŠ¨ï¼š**
- å®æ—¶ç›‘æ§ç³»ç»ŸçŠ¶æ€
- åˆ†æç”¨æˆ·è®¿é—®æ¨¡å¼
- æ£€æµ‹æ€§èƒ½ç“¶é¢ˆ
- ç”Ÿæˆæ—¥æŠ¥å’Œå‘¨æŠ¥

## 3. æ•°æ®è®°å½•æ–¹æ¡ˆ

### 3.1 æ´»åŠ¨è®°å½•è¡¨ç»“æ„

```sql
-- æ•°å­—ä¸“å‘˜æ´»åŠ¨è®°å½•è¡¨
CREATE TABLE `digital_agent_activity` (
    `id` bigint NOT NULL AUTO_INCREMENT COMMENT 'è®°å½•ID',
    `agent_type` varchar(50) NOT NULL COMMENT 'ä¸“å‘˜ç±»å‹ï¼šBPM/CRM/ERP/SYSTEM',
    `agent_name` varchar(100) NOT NULL COMMENT 'ä¸“å‘˜åç§°',
    `activity_type` varchar(50) NOT NULL COMMENT 'æ´»åŠ¨ç±»å‹',
    `activity_desc` text COMMENT 'æ´»åŠ¨æè¿°',
    `business_data` json COMMENT 'ä¸šåŠ¡æ•°æ®',
    `result_status` varchar(20) NOT NULL COMMENT 'æ‰§è¡Œç»“æœï¼šSUCCESS/FAILED/PENDING',
    `error_message` text COMMENT 'é”™è¯¯ä¿¡æ¯',
    `execution_time` datetime NOT NULL COMMENT 'æ‰§è¡Œæ—¶é—´',
    `duration_ms` int COMMENT 'æ‰§è¡Œè€—æ—¶ï¼ˆæ¯«ç§’ï¼‰',
    `tenant_id` bigint COMMENT 'ç§Ÿæˆ·ID',
    `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (`id`),
    KEY `idx_agent_type` (`agent_type`),
    KEY `idx_execution_time` (`execution_time`),
    KEY `idx_tenant_id` (`tenant_id`)
) ENGINE=InnoDB COMMENT='æ•°å­—ä¸“å‘˜æ´»åŠ¨è®°å½•è¡¨';

-- ä¸“å‘˜ç»Ÿè®¡æ±‡æ€»è¡¨
CREATE TABLE `digital_agent_statistics` (
    `id` bigint NOT NULL AUTO_INCREMENT COMMENT 'ç»Ÿè®¡ID',
    `agent_type` varchar(50) NOT NULL COMMENT 'ä¸“å‘˜ç±»å‹',
    `stat_date` date NOT NULL COMMENT 'ç»Ÿè®¡æ—¥æœŸ',
    `total_activities` int NOT NULL DEFAULT 0 COMMENT 'æ€»æ´»åŠ¨æ•°',
    `success_count` int NOT NULL DEFAULT 0 COMMENT 'æˆåŠŸæ•°',
    `failed_count` int NOT NULL DEFAULT 0 COMMENT 'å¤±è´¥æ•°',
    `avg_duration_ms` int COMMENT 'å¹³å‡è€—æ—¶ï¼ˆæ¯«ç§’ï¼‰',
    `business_metrics` json COMMENT 'ä¸šåŠ¡æŒ‡æ ‡',
    `tenant_id` bigint COMMENT 'ç§Ÿæˆ·ID',
    `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    PRIMARY KEY (`id`),
    UNIQUE KEY `uk_agent_date_tenant` (`agent_type`, `stat_date`, `tenant_id`)
) ENGINE=InnoDB COMMENT='æ•°å­—ä¸“å‘˜ç»Ÿè®¡æ±‡æ€»è¡¨';
```

### 3.2 æ´»åŠ¨ç±»å‹å®šä¹‰

```java
// æ´»åŠ¨ç±»å‹æšä¸¾
public enum DigitalAgentActivityType {
    // BPM æ´»åŠ¨
    BPM_PROCESS_CREATE("BPM_PROCESS_CREATE", "åˆ›å»ºå·¥ä½œæµå®ä¾‹"),
    BPM_TASK_APPROVE("BPM_TASK_APPROVE", "å®¡æ‰¹ä»»åŠ¡"),
    BPM_TASK_REJECT("BPM_TASK_REJECT", "é©³å›ä»»åŠ¡"),
    BPM_PROCESS_MONITOR("BPM_PROCESS_MONITOR", "ç›‘æ§æµç¨‹çŠ¶æ€"),
    
    // CRM æ´»åŠ¨
    CRM_CUSTOMER_CREATE("CRM_CUSTOMER_CREATE", "åˆ›å»ºå®¢æˆ·"),
    CRM_CUSTOMER_FOLLOW("CRM_CUSTOMER_FOLLOW", "è·Ÿè¿›å®¢æˆ·"),
    CRM_OPPORTUNITY_CREATE("CRM_OPPORTUNITY_CREATE", "åˆ›å»ºé”€å”®æœºä¼š"),
    CRM_LEAD_CONVERT("CRM_LEAD_CONVERT", "è½¬åŒ–çº¿ç´¢"),
    
    // ERP æ´»åŠ¨
    ERP_PURCHASE_ORDER("ERP_PURCHASE_ORDER", "åˆ›å»ºé‡‡è´­è®¢å•"),
    ERP_SALE_ORDER("ERP_SALE_ORDER", "åˆ›å»ºé”€å”®è®¢å•"),
    ERP_INVENTORY_UPDATE("ERP_INVENTORY_UPDATE", "æ›´æ–°åº“å­˜"),
    ERP_FINANCE_REPORT("ERP_FINANCE_REPORT", "ç”Ÿæˆè´¢åŠ¡æŠ¥è¡¨"),
    
    // ç³»ç»Ÿç›‘æ§æ´»åŠ¨
    SYSTEM_HEALTH_CHECK("SYSTEM_HEALTH_CHECK", "ç³»ç»Ÿå¥åº·æ£€æŸ¥"),
    SYSTEM_PERFORMANCE_MONITOR("SYSTEM_PERFORMANCE_MONITOR", "æ€§èƒ½ç›‘æ§"),
    SYSTEM_USER_ANALYSIS("SYSTEM_USER_ANALYSIS", "ç”¨æˆ·è¡Œä¸ºåˆ†æ");
}
```

## 4. n8n å·¥ä½œæµè®¾è®¡

### 4.1 åŸºç¡€å·¥ä½œæµæ¨¡æ¿

æ¯ä¸ªæ•°å­—ä¸“å‘˜éƒ½æœ‰ä¸€ä¸ªåŸºç¡€çš„å·¥ä½œæµæ¨¡æ¿ï¼ŒåŒ…å«ä»¥ä¸‹èŠ‚ç‚¹ï¼š

1. **å®šæ—¶è§¦å‘å™¨** - è®¾ç½®æ‰§è¡Œé¢‘ç‡
2. **æ•°æ®å‡†å¤‡** - å‡†å¤‡æ¨¡æ‹Ÿæ•°æ®
3. **ä¸šåŠ¡æ‰§è¡Œ** - è°ƒç”¨ç³»ç»ŸAPIæ‰§è¡Œä¸šåŠ¡æ“ä½œ
4. **ç»“æœè®°å½•** - è®°å½•æ‰§è¡Œç»“æœåˆ°æ•°æ®åº“
5. **å¼‚å¸¸å¤„ç†** - å¤„ç†æ‰§è¡Œå¼‚å¸¸
6. **é€šçŸ¥å‘é€** - å‘é€é€šçŸ¥é‚®ä»¶/æ¶ˆæ¯

### 4.2 BPM ä¸“å‘˜å·¥ä½œæµ

```json
{
  "name": "BPM Digital Agent Workflow",
  "nodes": [
    {
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.cron",
      "parameters": {
        "rule": {
          "hour": "*/2",
          "minute": "0"
        }
      }
    },
    {
      "name": "Generate Test Data",
      "type": "n8n-nodes-base.code",
      "parameters": {
        "jsCode": "// ç”Ÿæˆæµ‹è¯•æµç¨‹æ•°æ®\nconst processTypes = ['oa_leave', 'purchase_approval', 'expense_claim'];\nconst randomType = processTypes[Math.floor(Math.random() * processTypes.length)];\n\nreturn [{\n  processType: randomType,\n  applicant: 'digital_agent_' + Math.floor(Math.random() * 100),\n  data: {\n    amount: Math.floor(Math.random() * 10000),\n    reason: 'æ•°å­—ä¸“å‘˜æ¨¡æ‹Ÿç”³è¯·',\n    startTime: new Date().toISOString()\n  }\n}];"
      }
    },
    {
      "name": "Create Process Instance",
      "type": "n8n-nodes-base.httpRequest",
      "parameters": {
        "url": "http://localhost:8080/admin-api/bpm/process-instance/create",
        "method": "POST",
        "headers": {
          "Content-Type": "application/json",
          "Authorization": "Bearer {{$env.ADMIN_TOKEN}}"
        },
        "body": {
          "processDefinitionKey": "={{$json.processType}}",
          "variables": "={{$json.data}}"
        }
      }
    },
    {
      "name": "Record Activity",
      "type": "n8n-nodes-base.mysql",
      "parameters": {
        "operation": "insert",
        "table": "digital_agent_activity",
        "columns": "agent_type,agent_name,activity_type,activity_desc,business_data,result_status,execution_time,duration_ms",
        "values": "='BPM','BPMæ•°å­—ä¸“å‘˜','BPM_PROCESS_CREATE','åˆ›å»ºå·¥ä½œæµå®ä¾‹',JSON_OBJECT('processType', '{{$json.processType}}', 'instanceId', '{{$json.instanceId}}'),'SUCCESS',NOW(),{{$json.duration}}'"
      }
    }
  ],
  "connections": {
    "Schedule Trigger": {
      "main": [["Generate Test Data"]]
    },
    "Generate Test Data": {
      "main": [["Create Process Instance"]]
    },
    "Create Process Instance": {
      "main": [["Record Activity"]]
    }
  }
}
```

### 4.3 CRM ä¸“å‘˜å·¥ä½œæµ

```json
{
  "name": "CRM Digital Agent Workflow",
  "nodes": [
    {
      "name": "Daily Customer Activities",
      "type": "n8n-nodes-base.cron",
      "parameters": {
        "rule": {
          "hour": "9,14,17",
          "minute": "0"
        }
      }
    },
    {
      "name": "Choose Activity Type",
      "type": "n8n-nodes-base.code",
      "parameters": {
        "jsCode": "const activities = [\n  'create_customer',\n  'follow_customer',\n  'create_opportunity',\n  'convert_lead'\n];\n\nconst activity = activities[Math.floor(Math.random() * activities.length)];\nreturn [{ activityType: activity }];"
      }
    },
    {
      "name": "Create Customer",
      "type": "n8n-nodes-base.httpRequest",
      "parameters": {
        "url": "http://localhost:8080/admin-api/crm/customer/create",
        "method": "POST",
        "headers": {
          "Content-Type": "application/json",
          "Authorization": "Bearer {{$env.ADMIN_TOKEN}}"
        },
        "body": {
          "name": "æ•°å­—å®¢æˆ·_{{Math.floor(Math.random() * 1000)}}",
          "mobile": "138{{Math.floor(Math.random() * 100000000).toString().padStart(8, '0')}}",
          "industryId": "={{Math.floor(Math.random() * 10) + 1}}",
          "source": "1",
          "ownerUserId": "1"
        }
      }
    },
    {
      "name": "Record CRM Activity",
      "type": "n8n-nodes-base.mysql",
      "parameters": {
        "operation": "insert",
        "table": "digital_agent_activity",
        "columns": "agent_type,agent_name,activity_type,activity_desc,business_data,result_status,execution_time",
        "values": "='CRM','CRMæ•°å­—ä¸“å‘˜','CRM_CUSTOMER_CREATE','åˆ›å»ºå®¢æˆ·',JSON_OBJECT('customerName', '{{$json.name}}', 'customerId', '{{$json.id}}'),'SUCCESS',NOW()'"
      }
    }
  ]
}
```

### 4.4 ERP ä¸“å‘˜å·¥ä½œæµ

```json
{
  "name": "ERP Digital Agent Workflow",
  "nodes": [
    {
      "name": "Business Hours Trigger",
      "type": "n8n-nodes-base.cron",
      "parameters": {
        "rule": {
          "hour": "10,15",
          "minute": "30"
        }
      }
    },
    {
      "name": "Generate Order Data",
      "type": "n8n-nodes-base.code",
      "parameters": {
        "jsCode": "const orderTypes = ['purchase', 'sale'];\nconst type = orderTypes[Math.floor(Math.random() * orderTypes.length)];\n\nif (type === 'purchase') {\n  return [{\n    type: 'purchase',\n    supplierId: Math.floor(Math.random() * 10) + 1,\n    items: [\n      {\n        productId: Math.floor(Math.random() * 50) + 1,\n        count: Math.floor(Math.random() * 100) + 1,\n        price: Math.floor(Math.random() * 1000) + 100\n      }\n    ]\n  }];\n} else {\n  return [{\n    type: 'sale',\n    customerId: Math.floor(Math.random() * 10) + 1,\n    items: [\n      {\n        productId: Math.floor(Math.random() * 50) + 1,\n        count: Math.floor(Math.random() * 50) + 1,\n        price: Math.floor(Math.random() * 2000) + 500\n      }\n    ]\n  }];\n}"
      }
    },
    {
      "name": "Create Purchase Order",
      "type": "n8n-nodes-base.httpRequest",
      "parameters": {
        "url": "http://localhost:8080/admin-api/erp/purchase-order/create",
        "method": "POST",
        "headers": {
          "Content-Type": "application/json",
          "Authorization": "Bearer {{$env.ADMIN_TOKEN}}"
        },
        "body": {
          "supplierId": "={{$json.supplierId}}",
          "items": "={{$json.items}}"
        }
      }
    },
    {
      "name": "Create Sale Order",
      "type": "n8n-nodes-base.httpRequest",
      "parameters": {
        "url": "http://localhost:8080/admin-api/erp/sale-order/create",
        "method": "POST",
        "headers": {
          "Content-Type": "application/json",
          "Authorization": "Bearer {{$env.ADMIN_TOKEN}}"
        },
        "body": {
          "customerId": "={{$json.customerId}}",
          "items": "={{$json.items}}"
        }
      }
    }
  ]
}
```

## 5. é€šçŸ¥ç³»ç»Ÿè®¾è®¡

### 5.1 é‚®ä»¶é€šçŸ¥æ¨¡æ¿

```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>æ•°å­—ä¸“å‘˜è¿è¥æ—¥æŠ¥</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .header { background: #4CAF50; color: white; padding: 20px; text-align: center; }
        .content { padding: 20px; }
        .agent-section { margin: 20px 0; border: 1px solid #ddd; padding: 15px; }
        .metrics { display: flex; justify-content: space-around; margin: 15px 0; }
        .metric { text-align: center; }
        .metric-value { font-size: 24px; font-weight: bold; color: #4CAF50; }
        .metric-label { font-size: 14px; color: #666; }
        .alert { background: #ffeb3b; padding: 10px; margin: 10px 0; border-radius: 4px; }
        .error { background: #f44336; color: white; padding: 10px; margin: 10px 0; border-radius: 4px; }
    </style>
</head>
<body>
    <div class="header">
        <h1>æ•°å­—ä¸“å‘˜è¿è¥æ—¥æŠ¥</h1>
        <p>{{reportDate}}</p>
    </div>
    
    <div class="content">
        <div class="agent-section">
            <h2>ğŸ”„ BPM å·¥ä½œæµä¸“å‘˜</h2>
            <div class="metrics">
                <div class="metric">
                    <div class="metric-value">{{bpmTotalActivities}}</div>
                    <div class="metric-label">å¤„ç†æµç¨‹æ•°</div>
                </div>
                <div class="metric">
                    <div class="metric-value">{{bpmSuccessRate}}%</div>
                    <div class="metric-label">æˆåŠŸç‡</div>
                </div>
                <div class="metric">
                    <div class="metric-value">{{bpmAvgDuration}}ms</div>
                    <div class="metric-label">å¹³å‡è€—æ—¶</div>
                </div>
            </div>
            <p>ä»Šæ—¥ä¸»è¦æ´»åŠ¨ï¼šåˆ›å»ºäº† {{bpmProcessCount}} ä¸ªå·¥ä½œæµå®ä¾‹ï¼Œå®¡æ‰¹äº† {{bpmApprovalCount}} ä¸ªä»»åŠ¡</p>
        </div>
        
        <div class="agent-section">
            <h2>ğŸ‘¥ CRM å®¢æˆ·å…³ç³»ä¸“å‘˜</h2>
            <div class="metrics">
                <div class="metric">
                    <div class="metric-value">{{crmCustomerCount}}</div>
                    <div class="metric-label">æ–°å¢å®¢æˆ·</div>
                </div>
                <div class="metric">
                    <div class="metric-value">{{crmOpportunityCount}}</div>
                    <div class="metric-label">æ–°å¢æœºä¼š</div>
                </div>
                <div class="metric">
                    <div class="metric-value">{{crmFollowUpCount}}</div>
                    <div class="metric-label">è·Ÿè¿›è®°å½•</div>
                </div>
            </div>
            <p>ä»Šæ—¥ä¸»è¦æ´»åŠ¨ï¼šæ–°å¢å®¢æˆ· {{crmCustomerCount}} ä¸ªï¼Œè·Ÿè¿›å®¢æˆ· {{crmFollowUpCount}} æ¬¡</p>
        </div>
        
        <div class="agent-section">
            <h2>ğŸ“¦ ERP è¿è¥ä¸“å‘˜</h2>
            <div class="metrics">
                <div class="metric">
                    <div class="metric-value">{{erpPurchaseCount}}</div>
                    <div class="metric-label">é‡‡è´­è®¢å•</div>
                </div>
                <div class="metric">
                    <div class="metric-value">{{erpSaleCount}}</div>
                    <div class="metric-label">é”€å”®è®¢å•</div>
                </div>
                <div class="metric">
                    <div class="metric-value">{{erpInventoryUpdates}}</div>
                    <div class="metric-label">åº“å­˜æ›´æ–°</div>
                </div>
            </div>
            <p>ä»Šæ—¥ä¸»è¦æ´»åŠ¨ï¼šå¤„ç†é‡‡è´­è®¢å• {{erpPurchaseCount}} ä¸ªï¼Œé”€å”®è®¢å• {{erpSaleCount}} ä¸ª</p>
        </div>
        
        <div class="agent-section">
            <h2>ğŸ“Š ç³»ç»Ÿç›‘æ§ä¸“å‘˜</h2>
            <div class="metrics">
                <div class="metric">
                    <div class="metric-value">{{systemHealthScore}}</div>
                    <div class="metric-label">å¥åº·åˆ†æ•°</div>
                </div>
                <div class="metric">
                    <div class="metric-value">{{systemResponseTime}}ms</div>
                    <div class="metric-label">å“åº”æ—¶é—´</div>
                </div>
                <div class="metric">
                    <div class="metric-value">{{systemErrorRate}}%</div>
                    <div class="metric-label">é”™è¯¯ç‡</div>
                </div>
            </div>
            <p>ä»Šæ—¥ä¸»è¦æ´»åŠ¨ï¼šæ‰§è¡Œäº† {{systemHealthChecks}} æ¬¡å¥åº·æ£€æŸ¥ï¼Œå‘ç° {{systemAlerts}} ä¸ªå‘Šè­¦</p>
        </div>
        
        {{#if alerts}}
        <div class="agent-section">
            <h2>âš ï¸ å‘Šè­¦ä¿¡æ¯</h2>
            {{#each alerts}}
            <div class="alert">
                <strong>{{this.type}}</strong>: {{this.message}} ({{this.time}})
            </div>
            {{/each}}
        </div>
        {{/if}}
        
        {{#if errors}}
        <div class="agent-section">
            <h2>âŒ é”™è¯¯ä¿¡æ¯</h2>
            {{#each errors}}
            <div class="error">
                <strong>{{this.agent}}</strong>: {{this.error}} ({{this.time}})
            </div>
            {{/each}}
        </div>
        {{/if}}
    </div>
</body>
</html>
```

### 5.2 é’‰é’‰/ä¼ä¸šå¾®ä¿¡é€šçŸ¥

```json
{
  "msgtype": "markdown",
  "markdown": {
    "title": "æ•°å­—ä¸“å‘˜è¿è¥æ—¥æŠ¥",
    "text": "# æ•°å­—ä¸“å‘˜è¿è¥æ—¥æŠ¥\n\n**æ—¥æœŸ**: {{reportDate}}\n\n## ğŸ“Š æ€»ä½“æ¦‚å†µ\n- ğŸ”„ BPMä¸“å‘˜: å¤„ç† {{bpmTotalActivities}} ä¸ªæµç¨‹\n- ğŸ‘¥ CRMä¸“å‘˜: æ–°å¢ {{crmCustomerCount}} ä¸ªå®¢æˆ·\n- ğŸ“¦ ERPä¸“å‘˜: å¤„ç† {{erpOrderCount}} ä¸ªè®¢å•\n- ğŸ“Š ç³»ç»Ÿä¸“å‘˜: å¥åº·åˆ†æ•° {{systemHealthScore}}\n\n## ğŸ¯ å…³é”®æŒ‡æ ‡\n- æ€»æ´»åŠ¨æ•°: {{totalActivities}}\n- æˆåŠŸç‡: {{overallSuccessRate}}%\n- å¹³å‡å“åº”æ—¶é—´: {{avgResponseTime}}ms\n\n---\n\n> ç³»ç»Ÿè¿è¡Œæ­£å¸¸ï¼Œå¦‚æœ‰å¼‚å¸¸è¯·åŠæ—¶å¤„ç†"
  }
}
```

## 6. ç›‘æ§é¢æ¿è®¾è®¡

### 6.1 å®æ—¶ç›‘æ§æŒ‡æ ‡

- **æ´»åŠ¨æ€»æ•°**: å®æ—¶ç»Ÿè®¡å„ä¸“å‘˜çš„æ´»åŠ¨æ•°é‡
- **æˆåŠŸç‡**: è®¡ç®—å„ä¸“å‘˜çš„æˆåŠŸç‡è¶‹åŠ¿
- **å“åº”æ—¶é—´**: ç›‘æ§ç³»ç»Ÿå“åº”æ—¶é—´åˆ†å¸ƒ
- **é”™è¯¯ç‡**: è·Ÿè¸ªç³»ç»Ÿé”™è¯¯ç‡å˜åŒ–
- **ä¸šåŠ¡æŒ‡æ ‡**: å„æ¨¡å—çš„æ ¸å¿ƒä¸šåŠ¡æŒ‡æ ‡

### 6.2 å‘Šè­¦è§„åˆ™

- ä¸“å‘˜æ´»åŠ¨å¤±è´¥ç‡è¶…è¿‡ 10%
- ç³»ç»Ÿå“åº”æ—¶é—´è¶…è¿‡ 5 ç§’
- è¿ç»­ 3 æ¬¡æ´»åŠ¨å¤±è´¥
- æ•°æ®åº“è¿æ¥å¼‚å¸¸
- å†…å­˜ä½¿ç”¨ç‡è¶…è¿‡ 80%

## 7. éƒ¨ç½²å’Œé…ç½®

### 7.1 ç¯å¢ƒè¦æ±‚

- n8n ç‰ˆæœ¬ï¼šæœ€æ–°ç¨³å®šç‰ˆ
- æ•°æ®åº“ï¼šMySQL 8.0+
- è¿è¡Œç¯å¢ƒï¼šNode.js 18+
- å†…å­˜ï¼šå»ºè®® 2GB+

### 7.2 é…ç½®æ–‡ä»¶

```env
# n8n é…ç½®
N8N_HOST=localhost
N8N_PORT=5678
N8N_PROTOCOL=http

# æ•°æ®åº“é…ç½®
DB_TYPE=mysql
DB_HOST=localhost
DB_PORT=3306
DB_DATABASE=yudao_vue_pro
DB_USERNAME=root
DB_PASSWORD=123456

# ç³»ç»Ÿé…ç½®
SYSTEM_BASE_URL=http://localhost:8080
ADMIN_TOKEN=your_admin_token
MAIL_HOST=smtp.163.com
MAIL_PORT=587
MAIL_USERNAME=your_email@163.com
MAIL_PASSWORD=your_password

# é’‰é’‰/ä¼ä¸šå¾®ä¿¡é…ç½®
DINGTALK_WEBHOOK_URL=https://oapi.dingtalk.com/robot/send?access_token=xxx
WECHAT_WEBHOOK_URL=https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=xxx
```

### 7.3 å¯åŠ¨è„šæœ¬

```bash
#!/bin/bash
# start_digital_agents.sh

echo "å¯åŠ¨æ•°å­—ä¸“å‘˜ç›‘æ§ç³»ç»Ÿ..."

# å¯åŠ¨ n8n
n8n start &

# ç­‰å¾… n8n å¯åŠ¨
sleep 10

# å¯¼å…¥å·¥ä½œæµ
echo "å¯¼å…¥æ•°å­—ä¸“å‘˜å·¥ä½œæµ..."
n8n import:workflow --input=./workflows/bpm_agent.json
n8n import:workflow --input=./workflows/crm_agent.json
n8n import:workflow --input=./workflows/erp_agent.json
n8n import:workflow --input=./workflows/system_monitor.json

# å¯åŠ¨å·¥ä½œæµ
echo "å¯åŠ¨æ•°å­—ä¸“å‘˜å·¥ä½œæµ..."
n8n start:workflow --name="BPM Digital Agent Workflow"
n8n start:workflow --name="CRM Digital Agent Workflow"
n8n start:workflow --name="ERP Digital Agent Workflow"
n8n start:workflow --name="System Monitor Workflow"

echo "æ•°å­—ä¸“å‘˜ç›‘æ§ç³»ç»Ÿå¯åŠ¨å®Œæˆï¼"
echo "è®¿é—®åœ°å€: http://localhost:5678"
```

## 8. æ‰©å±•å»ºè®®

### 8.1 AI å¢å¼º

- é›†æˆ GPT æ¨¡å‹ï¼Œç”Ÿæˆæ›´æ™ºèƒ½çš„æ¨¡æ‹Ÿæ•°æ®
- ä½¿ç”¨æœºå™¨å­¦ä¹ ä¼˜åŒ–ä¸“å‘˜å†³ç­–é€»è¾‘
- å®ç°è‡ªç„¶è¯­è¨€å¤„ç†çš„å‘Šè­¦åˆ†æ

### 8.2 å¤šç§Ÿæˆ·æ”¯æŒ

- ä¸ºä¸åŒç§Ÿæˆ·é…ç½®ç‹¬ç«‹çš„æ•°å­—ä¸“å‘˜
- å®ç°ç§Ÿæˆ·çº§åˆ«çš„ç›‘æ§å’Œç»Ÿè®¡
- æ”¯æŒç§Ÿæˆ·è‡ªå®šä¹‰ä¸“å‘˜è¡Œä¸º

### 8.3 ç§»åŠ¨ç«¯æ”¯æŒ

- å¼€å‘ç§»åŠ¨ç«¯ç›‘æ§åº”ç”¨
- å®ç°æ¨é€é€šçŸ¥åŠŸèƒ½
- æ”¯æŒç§»åŠ¨ç«¯å‘Šè­¦å¤„ç†

### 8.4 é«˜å¯ç”¨éƒ¨ç½²

- æ”¯æŒ n8n é›†ç¾¤éƒ¨ç½²
- å®ç°æ•°æ®åº“ä¸»ä»å¤åˆ¶
- é…ç½®è´Ÿè½½å‡è¡¡å’Œæ•…éšœè½¬ç§»

è¿™ä¸ªè®¾è®¡æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„æ•°å­—ä¸“å‘˜ç›‘æ§ç³»ç»Ÿæ¡†æ¶ï¼Œå¯ä»¥æ ¹æ®å®é™…éœ€æ±‚è¿›è¡Œè°ƒæ•´å’Œæ‰©å±•ã€‚ç³»ç»Ÿé€šè¿‡æ¨¡æ‹ŸçœŸå®ç”¨æˆ·è¡Œä¸ºï¼Œå¸®åŠ©æ‚¨äº†è§£ç³»ç»Ÿçš„æ•´ä½“è¿è¡ŒçŠ¶å†µï¼Œå¹¶åŠæ—¶å‘ç°æ½œåœ¨é—®é¢˜ã€‚ 