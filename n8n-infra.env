# n8n 数字专员监控系统配置文件
# 用于基础设施模块的数字专员监控系统

# ==================== n8n 基础配置 ====================
# n8n 数据库配置
DB_TYPE=mysql
DB_MYSQL_HOST=localhost
DB_MYSQL_PORT=3306
DB_MYSQL_DATABASE=n8n
DB_MYSQL_USER=n8n
DB_MYSQL_PASSWORD=n8n123

# n8n 基础配置
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=admin123
N8N_HOST=localhost
N8N_PORT=5678
N8N_PROTOCOL=http
WEBHOOK_URL=http://localhost:5678/

# ==================== 若依系统配置 ====================
# 若依系统 API 配置
YUDAO_API_BASE_URL=http://localhost:8080
YUDAO_TENANT_ID=1
YUDAO_USERNAME=admin
YUDAO_PASSWORD=admin123

# 若依系统数据库配置
YUDAO_DB_HOST=localhost
YUDAO_DB_PORT=3306
YUDAO_DB_NAME=ruoyi-vue-pro
YUDAO_DB_USER=root
YUDAO_DB_PASSWORD=123456

# ==================== 数字专员配置 ====================
# ERP 采购管理专员配置
ERP_PURCHASE_AGENT_ENABLED=true
ERP_PURCHASE_AGENT_SCHEDULE=0 0 9,14,17 * * ?
ERP_PURCHASE_AGENT_TIMEOUT=300000
ERP_PURCHASE_AGENT_RETRY_COUNT=3
ERP_PURCHASE_AGENT_BATCH_SIZE=5

# ERP 销售管理专员配置
ERP_SALE_AGENT_ENABLED=true
ERP_SALE_AGENT_SCHEDULE=0 0 10,15,18 * * ?
ERP_SALE_AGENT_TIMEOUT=300000
ERP_SALE_AGENT_RETRY_COUNT=3
ERP_SALE_AGENT_BATCH_SIZE=5

# CRM 客户关系专员配置
CRM_CUSTOMER_AGENT_ENABLED=true
CRM_CUSTOMER_AGENT_SCHEDULE=0 0 9,14,17 * * ?
CRM_CUSTOMER_AGENT_TIMEOUT=300000
CRM_CUSTOMER_AGENT_RETRY_COUNT=3
CRM_CUSTOMER_AGENT_BATCH_SIZE=3

# BPM 工作流专员配置
BPM_WORKFLOW_AGENT_ENABLED=true
BPM_WORKFLOW_AGENT_SCHEDULE=0 0 */2 * * ?
BPM_WORKFLOW_AGENT_TIMEOUT=300000
BPM_WORKFLOW_AGENT_RETRY_COUNT=3
BPM_WORKFLOW_AGENT_BATCH_SIZE=10

# 系统监控专员配置
SYSTEM_MONITOR_AGENT_ENABLED=true
SYSTEM_MONITOR_AGENT_SCHEDULE=0 */10 * * * ?
SYSTEM_MONITOR_AGENT_TIMEOUT=60000
SYSTEM_MONITOR_AGENT_RETRY_COUNT=3
SYSTEM_MONITOR_AGENT_BATCH_SIZE=1

# ==================== 监控与报警配置 ====================
# 活动监控配置
ACTIVITY_MONITOR_ENABLED=true
ACTIVITY_MONITOR_INTERVAL=60000
ACTIVITY_FAILURE_RATE_THRESHOLD=10
ACTIVITY_RESPONSE_TIME_THRESHOLD=5000
ACTIVITY_CONSECUTIVE_FAILURES_THRESHOLD=5

# 报警配置
ALERT_EMAIL_ENABLED=true
ALERT_EMAIL_SMTP_HOST=smtp.163.com
ALERT_EMAIL_SMTP_PORT=465
ALERT_EMAIL_USER=your-email@163.com
ALERT_EMAIL_PASSWORD=your-password
ALERT_EMAIL_FROM=your-email@163.com
ALERT_EMAIL_TO=admin@company.com

# 钉钉报警配置
ALERT_DINGTALK_ENABLED=true
ALERT_DINGTALK_WEBHOOK_URL=https://oapi.dingtalk.com/robot/send?access_token=your-token
ALERT_DINGTALK_SECRET=your-secret

# 企业微信报警配置
ALERT_WECHAT_ENABLED=true
ALERT_WECHAT_WEBHOOK_URL=https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=your-key

# ==================== 数据库清理配置 ====================
# 活动数据保留配置
ACTIVITY_DATA_RETENTION_DAYS=30
STATISTICS_DATA_RETENTION_DAYS=90
ALERT_DATA_RETENTION_DAYS=60

# 自动清理配置
AUTO_CLEANUP_ENABLED=true
AUTO_CLEANUP_SCHEDULE=0 0 2 * * ?

# ==================== 统计配置 ====================
# 统计报表配置
STATISTICS_ENABLED=true
DAILY_STATISTICS_SCHEDULE=0 0 1 * * ?
WEEKLY_STATISTICS_SCHEDULE=0 0 1 * * MON
MONTHLY_STATISTICS_SCHEDULE=0 0 1 1 * ?

# 统计报表邮件配置
STATISTICS_EMAIL_ENABLED=true
STATISTICS_EMAIL_SCHEDULE=0 0 8 * * ?
STATISTICS_EMAIL_RECIPIENTS=admin@company.com,manager@company.com

# ==================== 日志配置 ====================
# 应用日志配置
LOG_LEVEL=INFO
LOG_FILE_PATH=/var/log/n8n-digital-agent/
LOG_FILE_MAX_SIZE=100MB
LOG_FILE_MAX_FILES=10
LOG_FILE_DATE_PATTERN=YYYY-MM-DD

# 审计日志配置
AUDIT_LOG_ENABLED=true
AUDIT_LOG_PATH=/var/log/n8n-digital-agent/audit/
AUDIT_LOG_RETENTION_DAYS=365

# ==================== 性能配置 ====================
# 并发配置
MAX_CONCURRENT_EXECUTIONS=10
MAX_EXECUTION_TIMEOUT=600000
EXECUTION_MEMORY_LIMIT=1024

# 缓存配置
CACHE_ENABLED=true
CACHE_TYPE=memory
CACHE_TTL=3600

# 数据库连接池配置
DB_CONNECTION_POOL_MIN=5
DB_CONNECTION_POOL_MAX=20
DB_CONNECTION_POOL_IDLE=10000
DB_CONNECTION_POOL_ACQUIRE=60000

# ==================== 安全配置 ====================
# JWT 配置
JWT_SECRET=your-jwt-secret-key
JWT_EXPIRATION=3600

# 加密配置
ENCRYPTION_KEY=your-encryption-key
ENCRYPTION_ALGORITHM=AES-256-GCM

# 接口限流配置
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW=60000
RATE_LIMIT_MAX_REQUESTS=100

# IP 白名单配置
IP_WHITELIST_ENABLED=false
IP_WHITELIST=127.0.0.1,::1

# ==================== 开发配置 ====================
# 开发模式配置
NODE_ENV=production
DEBUG_MODE=false

# 测试配置
TEST_MODE=false
TEST_DATA_ENABLED=false
MOCK_EXTERNAL_API=false

# 备份配置
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 0 3 * * ?
BACKUP_PATH=/backup/n8n-digital-agent/
BACKUP_RETENTION_DAYS=7

# ==================== 高可用配置 ====================
# 集群配置
CLUSTER_ENABLED=false
CLUSTER_NODE_ID=node-1
CLUSTER_NODES=node-1:localhost:5678,node-2:localhost:5679

# 健康检查配置
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=10000
HEALTH_CHECK_ENDPOINT=/health

# 负载均衡配置
LOAD_BALANCER_ENABLED=false
LOAD_BALANCER_ALGORITHM=round_robin
LOAD_BALANCER_HEALTH_CHECK=true 